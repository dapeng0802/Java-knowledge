#### 104. Java 字节码
&#8195;&#8195;为了让 Java 语言具有良好的跨平台能力，Java 独具匠心地提供了一种可以在所有平台上都能使用的一种中间代码——字节码（ByteCode）。有了字节码，无论哪种平台，只要安装了平台对应的 Java 虚拟机，都可以直接运行字节码。同样，有了字节码，也解除了 Java 虚拟机和 Java 语言之间的耦合。目前 Java 虚拟机已经可以支持很多 Java 语言之外的语言了，如 Kotlin、Groovy、JRuby、Jython、Scala 等，这些语言也可以被编译成字节码，而虚拟机并不关心字节码是哪种语言编译而来的，只要字节码符合 Java 虚拟机的格式规范都可以运行。

&#8195;&#8195;为了方便 Java 虚拟机识别一个文件是否是 class 类型的文件，SUN 公司规定每个 class 文件都必须以一个 word（四个字节）作为文件开始，这个数字就是魔数。魔数是由四个字节的无符号数组成的，用以识别一个文件类型，class 文件的魔数是`0xCAFEBABE`。在有些代码中，存在一些数字常量或字符串，没有注释，并且从命名上也看不出其意义，这样的常量或字符串也称为魔数，这样的魔数不仅使代码的可读性大大降低，还可能存在潜在的问题，所以在代码中要尽量避免魔数，可以用枚举或静态变量代替。
#### 105. Java 编译与反编译
&#8195;&#8195;将便于人编写、阅读、维护的高级计算机语言所写作的源代码程序，翻译为计算机能解读、运行的低阶机器语言的程序的过程就是编译，负责这一过程的处理工具叫做编译器。Java 语言中负责编译的编译器是`javac`命令，收录于 JDK 中， 其可将后缀名为`.java`的源文件编译为后缀名为`.class`的可以运行于 JVM 的字节码文件，由 JVM 再将`.class`文件类型的字节码解释成机器可以识别的机器语言。反编译的过程与编译相反，将已编译好的编程语言还原到未编译的状态，也就是程序语言的源代码。Java 语言中的反编译一般指将`.class`文件转换成`.java`文件，`javap`是 JDK 自带的反编译工具，可以对代码反编译，也可以查看 Java 编译器生成的字节码。此外，jad 和 cfr 也不错的第三方反编译工具。为了保护源文件，不被攻击者轻易通过反编译获得未开源的源文件，可以通过隔离 Java 程序、对`class`文件加密、代码混淆等手段提高攻击者成本，但无法彻底防治。
&#8195;&#8195;
